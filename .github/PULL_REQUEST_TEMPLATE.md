# Выполнено ДЗ №3

 - [v] Основное ДЗ

## В процессе сделано:
 - Пункт 1 //Создание учетной записи в GCP
 - Пункт 2 //Создание в веб-интерфейсе инстансов ВМ и подключение к ним по SSH
 - Пункт 3 //Рассмотрим варианты подключения к хостам через бастион-хости VPN
 - Пункт 4 //Самостоятельная работа
 
## Создание учетной записи в GCP
   Пунк легкий, никаких проблем в создании учетной записи нет.

## Создание в веб-интерфейсе инстансов ВМ и подключение к ним по SSH
   Работа с GCE, так же проблем не было. Создание учетной записи, и конфигурация её от железа до настройки сети.
   После добавления ключа SSH, не возникло проблем в подключении. Ключ был создан ранее для досупа к GitHub
   Нужно было создать 2 ВМ: bastionhost с белым статическим IP и someinternalhost с серым IP.
   И тестирования сквозного подключения на сервер someinternalhost

## Рассмотрим варианты подключения к хостам через бастион-хости VPN
   В задании необходимо установить VPN-сервер Pritunl (при помощи скрипта) и настройкой его.
   Для работы нужно было разрешить соединения на HTTP, HTTPS и порт сервера VPN у меня UDP-12567  при помощи тегов
   Был создан пользователь test, оганизация и сервер.
   Подключение прошло успешно к серверу ВПН и подключение по ssh к серверу someinternalhost

## Самостоятельная работа
 - Был иследован способ ProxyJump в ssh. Потребовалось обновить openssh-server
   до версии 7.3, начиная с этой версии поддерживается данная функция.
   параметр -J [user@]host[:port]] [-L address] [-l login_name] дает возможность сделать переключение на хост 
   за NAT-ом. Команда получается следующая:
   ssh -J artemadm@35.234.66.30:22 artemadm@10.156.0.3
   После двойного ввода пароль от ключа попал на сервер 10.156.0.3 (someinternalhost)
 - Для выполнения задачи "подключиться при помощи записи "ssh someinternalhost"
   Был создан файл в директории ~/.ssh/config и приведен к следующиму виду:
   Host someinternalhost
        HostName 10.156.0.3
        ProxyJump artemadm@35.234.66.30:22
        User artemadm
  
   С этим аллиасом стало возможно подключаться командой с одним параметром ssh someinternalhost

#--# Задание
bastion_IP = 35.234.66.30
someinternalhost_IP = 10.156.0.3


